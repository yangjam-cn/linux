head	1.1;
access;
symbols;
locks; strict;
comment	@ * @;


1.1
date	2020.08.31.08.31.56;	author youngjam;	state Exp;
branches;
next	;


desc
@open&close
@


1.1
log
@Initial revision
@
text
@#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdlib.h>
#include <stdio.h>

int main(void)
{
    int fd;
    char path[] = "hello";

    if ((fd = open(path, O_CREAT | O_TRUNC | O_WRONLY, 0644)) < 0)
    {
        perror("open");
        exit(EXIT_FAILURE);
    }
    else
    {
        printf("opened %s\n", path);
        printf("descriptor is %d\n", fd);
    }

    /*检查文件是否关闭返回值*/
    /*在网络文件系统中,close可能因网络延迟而失败*/
    /*错误状态报告可能会在写入操作结束后晚一点报告,但是肯定在关闭文件时报告*/
    if (close(fd) < 0)
    {
        perror("close");
        exit(EXIT_FAILURE);
    }
    else
    {
        printf("closed %s\n", path);
    }
    
    exit(EXIT_SUCCESS);
}@
